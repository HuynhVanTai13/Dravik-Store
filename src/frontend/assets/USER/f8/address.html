<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Địa chỉ của bạn | DRAVIK STORE</title>
  <link rel="stylesheet" href="css/address.css" />
  <link rel="stylesheet" href="css/responsive.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet"/>
  <style>
    input, label {
      display: block;
      width: 100%;
      margin-bottom: 10px;
    }
    label {
      font-weight: bold;
    }
  </style>
</head>
<body>

<!-- HEADER -->
  <header>
    <div class="header-main">
      <div class="img-logo">
        <img src="images/logo.png" alt="Dravik Store">
      </div>
      <div class="header-nav">
        <div class="header-search">
          <div class="search">
            <input type="text" placeholder="Nhập sản phẩm cần tìm kiếm ...">
            <button class="icon-search"><i class="fas fa-search"></i></button>
          </div>
          <div class="nav-top">
            <a href=""><i class="fas fa-file-alt"></i><p>Đơn hàng </p></a>
            <a href=""><i class="fas fa-heart"></i><p>Yêu thích </p></a>
            <a href=""><i class="fas fa-user"></i><p>Tài khoản </p></a>
            <a href="" class="cart"><i class="fas fa-shopping-cart"></i><p>Giỏ hàng </p><span class="badge">3</span></a>
          </div>
        </div>
        <div class="nav-bottom">
          <a href="">Trang chủ</a>
          <a href="introduce.html">Giới thiệu</a>
          <a href="">Sản phẩm </a>
          <a href="">Tin tức </a>
          <a href="">Hàng mới </a>
          <a href="contact.html">Liên hệ </a>
          <a href="">Sản phẩm giảm giá  </a>
        </div>
      </div>
    </div>
  </header>

  <!-- HEADER MOBILE -->
  <div class="mobile-header">
    <span class="menu-icon"><i class="fas fa-bars"></i></span>
    <div class="img-logo"><img src="images/logo.png" alt="Dravik Store"></div>
    <div class="icon-group">
      <span><i class="fas fa-search"></i></span>
      <span class="cart"><i class="fas fa-shopping-cart"></i><span class="badge">3</span></span>
    </div>
  </div>

  <!-- BREADCRUMB -->
  <div class="breadcrumb-wrapper">
    <div class="breadcrumb">
      <a href="#">Trang chủ</a> / Trang khách hàng
    </div>
  </div>

<main class="main-container">
  <div class="sidebar">
    <h2>Trang tài khoản</h2>
    <p>Xin chào, <span class="username">Tuấn Võ</span>!</p>
    <ul>
      <li><a href="account.html">Thông tin tài khoản</a></li>
      <li><a href="orders.html">Đơn hàng của bạn</a></li>
      <li><a href="changepassword.html">Đổi mật khẩu</a></li>
      <li class="active"><a href="#">Địa chỉ</a></li>
    </ul>
  </div>

  <div class="content">
    <h2>Địa chỉ của bạn</h2>
    <table>
      <thead>
        <tr>
          <th>STT</th>
          <th>Địa chỉ</th>
          <th>Người nhận</th>
          <th>Số điện thoại</th>
          <th>Trạng thái</th>
          <th>Thao tác</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>1</td>
          <td>115/47 Lê Đức Thọ, Gò Vấp</td>
          <td>Võ Tuấn</td>
          <td>0912345678</td>
          <td><button class="active-btn">Đang sử dụng</button></td>
          <td>
            <button class="btn-edit">Sửa</button>
            <button class="btn-delete">Xóa</button>
          </td>
        </tr>
        <tr>
          <td>2</td>
          <td>25 Trần Hưng Đạo, Quận 1</td>
          <td>Nguyễn Văn A</td>
          <td>0987654321</td>
          <td><button class="choose-btn">Chọn</button></td>
          <td>
            <button class="btn-edit">Sửa</button>
            <button class="btn-delete">Xóa</button>
          </td>
        </tr>
      </tbody>
    </table>

    <div class="add-address">
      <button id="addAddressBtn">Thêm địa chỉ</button>
    </div>
  </div>
</main>

<!-- MODAL -->
<div id="editAddressModal" class="modal-overlay" style="display: none;">
  <div class="modal">
    <h3 id="modalTitle">Thêm địa chỉ</h3>
    <form id="editAddressForm">
      <label for="edit-address">Địa chỉ <span style="color:red">*</span></label>
      <input type="text" id="edit-address" required>

      <label for="edit-name">Người nhận <span style="color:red">*</span></label>
      <input type="text" id="edit-name" required>

      <label for="edit-phone">Số điện thoại <span style="color:red">*</span></label>
      <input type="tel" id="edit-phone" required>

      <div class="modal-actions">
        <button type="button" id="cancelEdit">Hủy</button>
        <button type="submit">Lưu thay đổi</button>
      </div>
    </form>
    <span class="modal-close" id="closeEditModal">&times;</span>
  </div>
</div>
<!-- FOOTER -->
 <footer>
    <div class="row-footer">
      <div class="col-4-footer">
        <img src="images/logo-footer.png" alt="">
        <div class="icon-3-footer">
          <span><i class="fa-solid fa-location-dot"></i></span>
          <p>Địa chỉ: 158/25, Phạm Văn Chiêu, Phường 8, Gò Vấp, TP Hồ Chí Minh</p>
        </div>
        <div class="icon-3-footer">
          <span><i class="fa-solid fa-phone"></i></span>
          <p>Số điện thoại: 1234567890</p>
        </div>
        <div class="icon-3-footer">
          <span><i class="fa-solid fa-envelope"></i></span>
          <p>Email: Dravikstore@gmail.com</p>
        </div>
      </div>
      <div class="col-4-footer">
        <h4>Hỗ trợ khách hàng</h4>
        <p class="mgb-20">Chính sách đổi hàng</p>
        <p class="mgb-20">Chính sách bảo hành</p>
        <p class="mgb-20">Chính sách Membership</p>
        <p class="mgb-20">Bảo mật thông tin</p>
        <p class="mgb-20">Hỗ trợ giao hàng</p>
      </div>
      <div class="col-4-footer htkh">
        <h4>Tổng đài hỗ trợ</h4>
        <p class="mgb-20">Gọi mua hàng: 1234567890 (8h-20h)</p>
        <p class="mgb-20">Gọi bảo hành: 1234567890 (8h-20h)</p>
        <p class="mgb-20">Gọi khiếu nại: 1234567890 (8h-20h)</p>
      </div>
      <div class="col-4-footer">
        <h4>Gửi mail ngay để nhận ưu đãi !</h4>
        <div class="subscribe-box">
          <input type="email" placeholder="Thả email nhận khuyến mãi...">
          <button><i class="fas fa-paper-plane"></i></button>
        </div>
        <h4>Phương thức thanh toán</h4>
        <div class="payment-methods">
          <img src="images/VNPAY.jpg" alt="VNPAY">
          <img src="images/cod.jpg" alt="COD">
          <img src="images/momo.jpg" alt="MoMo">
          <img src="images/visa.jpg" alt="Vietcombank">
        </div>
      </div>
    </div>
    <div class="footer-bottom">© Bản quyền thuộc về DRAVIK STORE</div>
  </footer>

<!-- SCRIPT -->
<script>
document.addEventListener('DOMContentLoaded', () => {
  const modalOverlay = document.getElementById('editAddressModal');
  const closeEdit = document.getElementById('closeEditModal');
  const cancelEdit = document.getElementById('cancelEdit');
  const form = document.getElementById('editAddressForm');
  const inputField = document.getElementById('edit-address');
  const inputName = document.getElementById('edit-name');
  const inputPhone = document.getElementById('edit-phone');
  const addBtn = document.getElementById('addAddressBtn');
  const modalTitle = document.getElementById('modalTitle');
  let currentRow = null;

  function openModal(isEdit) {
    modalTitle.textContent = isEdit ? 'Sửa địa chỉ' : 'Thêm địa chỉ';
    modalOverlay.style.display = 'flex';
  }

  function closeModal() {
    modalOverlay.style.display = 'none';
  }

  function handleEdit(e) {
    currentRow = e.target.closest('tr');
    inputField.value = currentRow.children[1].textContent.trim();
    inputName.value = currentRow.children[2].textContent.trim();
    inputPhone.value = currentRow.children[3].textContent.trim();
    openModal(true);
  }

  function handleDelete(e) {
    if (confirm("Bạn có chắc muốn xoá địa chỉ này không?")) {
      const row = e.target.closest('tr');
      row.remove();
    }
  }

  function handleChoose(e) {
    document.querySelectorAll('td:nth-child(5) button').forEach(btn => {
      btn.classList.remove('active-btn');
      btn.classList.add('choose-btn');
      btn.textContent = 'Chọn';
    });

    const btn = e.target;
    btn.classList.remove('choose-btn');
    btn.classList.add('active-btn');
    btn.textContent = 'Đang sử dụng';
  }

  function bindRowEvents(row) {
    row.querySelector('.btn-edit').addEventListener('click', handleEdit);
    row.querySelector('.btn-delete').addEventListener('click', handleDelete);
    row.querySelector('td:nth-child(5) button').addEventListener('click', handleChoose);
  }

  document.querySelectorAll('.btn-edit').forEach(btn => btn.addEventListener('click', handleEdit));
  document.querySelectorAll('.btn-delete').forEach(btn => btn.addEventListener('click', handleDelete));
  document.querySelectorAll('.choose-btn, .active-btn').forEach(btn => btn.addEventListener('click', handleChoose));

  addBtn.addEventListener('click', () => {
    currentRow = null;
    inputField.value = '';
    inputName.value = '';
    inputPhone.value = '';
    openModal(false);
  });

  [closeEdit, cancelEdit].forEach(btn => btn.addEventListener('click', closeModal));
  modalOverlay.addEventListener('click', e => {
    if (e.target === modalOverlay) closeModal();
  });

  form.addEventListener('submit', e => {
    e.preventDefault();
    const newAddr = inputField.value.trim();
    const newName = inputName.value.trim();
    const newPhone = inputPhone.value.trim();
    if (!newAddr || !newName || !newPhone) return;

    if (currentRow) {
      currentRow.children[1].textContent = newAddr;
      currentRow.children[2].textContent = newName;
      currentRow.children[3].textContent = newPhone;
    } else {
      const tableBody = document.querySelector('table tbody');
      const rowCount = tableBody.querySelectorAll('tr').length + 1;
      const newRow = document.createElement('tr');
      newRow.innerHTML = `
        <td>${rowCount}</td>
        <td>${newAddr}</td>
        <td>${newName}</td>
        <td>${newPhone}</td>
        <td><button class="choose-btn">Chọn</button></td>
        <td>
          <button class="btn-edit">Sửa</button>
          <button class="btn-delete">Xóa</button>
        </td>
      `;
      tableBody.appendChild(newRow);
      bindRowEvents(newRow);
    }

    closeModal();
  });
});
</script>


</body>
</html>
